webpackJsonp([3],{656:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),a(712);var n=a(713),i=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=i.default,t.exports=e.default},661:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(71),u=n(i),r=a(12),o=n(r),s=a(13),d=n(s),c=function(){function t(){(0,o.default)(this,t)}return(0,d.default)(t,[{key:"setState",value:function(t,e){var a=this.state,n=void 0===a?{}:a;this.state=(0,u.default)({},n,t),e&&e()}}]),t}();e.default=c,t.exports=e.default},662:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(273),u=n(i),r=a(71),o=n(r),s=a(99),d=n(s),c=a(156),f=n(c),l=a(26),v=n(l),h=a(12),p=n(h),g=a(13),_=n(g),m=a(27),w=n(m),x=a(28),y=n(x),b=a(155),k=a(661),M=n(k),j=a(667),D=n(j),P=new Worker(D.default),I=function(t){P.postMessage(t)},A=function(t){P.onmessage=function(e){t&&t(e.data)}},F={useImageData:!1,size:1,exclude:[[255,255,255],[0,0,0,0]],include:[],imgs:[]},O=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,p.default)(this,e);for(var a=(0,w.default)(this,(e.__proto__||(0,v.default)(e)).call(this,t)),n=(0,f.default)(t),i=n.length,u={},r=0;r<i;r++){var s=n[r],c=t[s];switch(void 0===c?"undefined":(0,d.default)(c)){case"function":a[s]=c.bind(a);break;default:u[s]=c}}return a.state=(0,o.default)({},F,u),a._partAddFuncs(a._partGetSpots),a.init&&a.init(),a}return(0,y.default)(e,t),(0,_.default)(e,[{key:"_partGetSpots",value:function(){var t=this;return new u.default(function(e){if(!t.state.useImageData)return e();var a=t.state,n=a.ctx,i=a.eles,u=void 0===i?[]:i,r=a.cw,o=void 0===r?0:r,s=a.ch,d=void 0===s?0:s,c=a.exclude,f=a.include,l=a.size,v=u.map(function(t){n.clearRect(0,0,o,d);var e=t.width,a=t.height;e>=o&&(a=Math.floor(a*o/e),e=o);var i=(o-e)/2,u=(d-a)/2;return n.drawImage(t,i,u,e,a),n.getImageData(i,u,e,a)});n.clearRect(0,0,o,d),A(function(a){t.setState({spots:a}),e()}),I({imageData:v,opts:{cw:o,ch:d,exclude:c,include:f,size:l}})})}},{key:"_partAddFuncs",value:function(t,e){var a=this,n=this._partFuncs,i=void 0===n?[]:n;t=t instanceof Array?t:[t],t=t.map(function(t){return t.bind(a)}),this._partFuncs=i.concat(t),e&&this._partRefresh(e)}},{key:"_partRefresh",value:function(t){var e=this._partFuncs.map(function(t){return t()});u.default.all(e).then(t)}},{key:"_partLoad",value:function(){var t=this,e=this.state,a=e.imgs,n=void 0===a?[]:a,i=e.useImageData;return new u.default(function(e){(0,b.loadAll)(n,function(a){if(t.setState({eles:a}),!i)return e();t._partRefresh(e)})})}}]),e}(M.default);e.default=O,t.exports=e.default},664:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Part=void 0;var i=a(665),u=n(i),r=a(662),o=n(r);e.Part=o.default,e.default=u.default},665:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(273),u=n(i),r=a(71),o=n(r),s=a(99),d=n(s),c=a(156),f=n(c),l=a(26),v=n(l),h=a(12),p=n(h),g=a(13),_=n(g),m=a(27),w=n(m),x=a(28),y=n(x),b=a(155),k=a(666),M=a(661),j=n(M),D=a(662),P=n(D);ImageData.prototype.getDataFrom=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],a=this,n=a.width,i=a.data,u=(0,k.getPiexl)({list:t,width:n}),r=u.length,o=0;o<r;o++){var s=u[o],d=s.index,c=s.value;i[d]=i[d]||c}e.putImageData(a,0,0)};var I=function(t){function e(t){(0,p.default)(this,e);var a=(0,w.default)(this,(e.__proto__||(0,v.default)(e)).call(this,t));return a.state={w:t.w,h:t.h,cva:t.cva,ratio:window.devicePixelRatio,list:t.list||[]},a.action=a.action.bind(a),a.update=a.update.bind(a),a.init(),a}return(0,y.default)(e,t),(0,_.default)(e,[{key:"setCva",value:function(t){var e=this.state.ctx;return(0,f.default)(t).forEach(function(a){var n=t[a];switch(void 0===n?"undefined":(0,d.default)(n)){case"string":e[a]=n;break;case"function":n(e)}}),e}},{key:"getAttr",value:function(){var t=this.state,e=t.cva,a=t.w,n=t.h,i=this.state.ratio;e="string"==typeof e?(0,b.getEles)(e)[0]:e;var u=e.parentNode;a=a||u.clientWidth||document.body.clientWidth,n=n||u.clientHeight||document.body.clientHeight;var r=a*i,o=n*i;e.setAttribute("width",r+"px"),e.setAttribute("height",o+"px"),e.style.width=a+"px",e.style.height=n+"px";var s=e.getContext("2d");this.setState({cva:e,ctx:s,w:a,h:n,cw:r,ch:o})}},{key:"setList",value:function(){var t=this.state,e=t.ratio,a=t.cw,n=t.ch,i=t.w,u=t.h,r=t.ctx,s={ratio:e,cw:a,ch:n,w:i,h:u,ctx:r};this.state.list=this.state.list.map(function(t,e){return new P.default((0,o.default)({order:e},s,t))})}},{key:"update",value:function(){var t=this,e=this.state,a=e.list,n=void 0===a?[]:a,i=e.ctx,r=e.cw,o=e.ch,s=e.ratio,d=e.w,c=e.h;window.requestAnimationFrame(function(){for(var e=[],a=0;a<n.length;a++){var f=n[a];f.update&&e.push(f.update(i,r,o,s,d,c))}u.default.all(e).then(t.update)})}},{key:"action",value:function(){for(var t=this,e=this.state,a=e.list,n=void 0===a?[]:a,i=e.ctx,r=e.cw,o=e.ch,s=e.ratio,d=e.w,c=e.h,f=[],l=0;l<n.length;l++){var v=n[l];v._partLoad&&f.push(v._partLoad())}u.default.all(f).then(function(){n.forEach(function(t){t.render&&t.render(i,r,o,s,d,c)}),t.update()})}},{key:"init",value:function(){this.getAttr(),this.setList(),this.action()}}]),e}(j.default);e.default=I,t.exports=e.default},666:function(t,e,a){"use strict";function n(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.list,a=void 0===e?[]:e,n=t.width,i=void 0===n?0:n,u=a.length,r=[],o=0;o<u;o++)for(var s=a[o],d=s.x,c=s.y,f=s.color,l=void 0===f?[]:f,v=4*(d+(c-1)*i),h=0;h<4;h++)r.push({index:v+h,value:l[h]});return r}Object.defineProperty(e,"__esModule",{value:!0}),e.getPiexl=n},667:function(t,e,a){t.exports=a.p+"js/d3d3e3d5bdf94ded22305ef17322581e.js"},712:function(t,e){},713:function(t,e,a){"use strict";(function(t){function n(t){return t&&t.__esModule?t:{default:t}}function i(t){for(var e=t.from,a=void 0===e?[]:e,n=t.to,i=void 0===n?[]:n,u=t.curr,r=a.length,o=[],s=0;s<r;s++){var d=a[s],c=i[s],f=d.color||[],l=c.color||[];o[s]={x:R(d.x,c.x,u),y:R(d.y,c.y,u),color:[R(f[0],l[0],u),R(f[1],l[1],u),R(f[2],l[2],u),R(f[3],l[3],u)]}}return o}Object.defineProperty(e,"__esModule",{value:!0});var u=a(273),r=n(u),o=a(26),s=n(o),d=a(12),c=n(d),f=a(13),l=n(f),v=a(27),h=n(v),p=a(28),g=n(p),_=a(29),m=n(_),w=a(30),x=n(w),y=a(3),b=n(y),k=a(31),M=n(k),j=a(714),D=n(j),P=a(715),I=n(P),A=a(664),F=n(A),O={View:{displayName:"View"}},S=(0,M.default)({filename:"/Users/xiaoshuang/xiaoshuang/save/web-something-awesome/something-awesome/frontend/js/container/canvas/pages/View/View.jsx",components:O,locals:[t],imports:[b.default]}),V=(0,x.default)({filename:"/Users/xiaoshuang/xiaoshuang/save/web-something-awesome/something-awesome/frontend/js/container/canvas/pages/View/View.jsx",components:O,locals:[],imports:[b.default,m.default]}),R=function(t,e,a){return Math.ceil(t+(e-t)*a)},E=[D.default,I.default],L=function(t){return function(e){return S(V(e,t),t)}}("View")(function(t){function e(){return(0,c.default)(this,e),(0,h.default)(this,(e.__proto__||(0,s.default)(e)).apply(this,arguments))}return(0,g.default)(e,t),(0,l.default)(e,[{key:"componentDidMount",value:function(){this.init()}},{key:"init",value:function(){new F.default({cva:"#canvas",list:[{imgs:E,useImageData:!0,size:1,render:function(t,e,a){var n=this.state.spots,i=void 0===n?[]:n;t.createImageData(e,a).getDataFrom(i[0],t)},update:function(t,e,a){var n=this;return new r.default(function(u){var r=n.state.curr,o=void 0===r?0:r,s=n.state,d=s.index,c=void 0===d?0:d,f=s.spots,l=void 0===f?[]:f,v=(c+1)%l.length;o+=1/60,o>=1?(n.state.index=v,n.state.curr=0):n.state.curr=o;var h=i({from:l[c],to:l[v],curr:o});t.createImageData(e,a).getDataFrom(h,t),u()})}}]}).setCva({strokeStyle:"rgba(0,0,0,0)"})}},{key:"render",value:function(){return b.default.createElement("div",{className:"page-canvas-view-render"},b.default.createElement("canvas",{id:"canvas"}))}}]),e}(y.Component));e.default=L,t.exports=e.default}).call(e,a(15)(t))},714:function(t,e,a){t.exports=a.p+"img/800a76ff0824f5d1cf6033df5affe869.jpg"},715:function(t,e,a){t.exports=a.p+"img/b30d7d6b39820f10f86705a39ce81609.jpg"}});