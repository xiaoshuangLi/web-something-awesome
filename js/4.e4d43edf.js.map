{"version":3,"sources":["webpack:///js/4.e4d43edf.js","webpack:///./frontend/js/container/canvas/pages/Music/index.js","webpack:///./frontend/js/container/canvas/components/View/Base.js","webpack:///./frontend/js/container/canvas/components/View/Part.js","webpack:///./frontend/js/container/canvas/components/View/index.js","webpack:///./frontend/js/container/canvas/components/View/Canvas.js","webpack:///./frontend/js/container/canvas/components/View/func.js","webpack:///./frontend/js/container/canvas/components/View/getSpots_inline.js","webpack:///./frontend/js/container/canvas/pages/Music/Music.jsx","webpack:///./frontend/js/container/canvas/pages/Music/durden.jpg","webpack:///./frontend/js/container/canvas/pages/Music/close.svg"],"names":["webpackJsonp","657","module","exports","__webpack_require__","Object","defineProperty","value","_Music","_Music2","obj","__esModule","default","Music","661","_interopRequireDefault","_assign","_assign2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Base","this","key","cb","_state","state","undefined","662","_promise","_promise2","_typeof2","_typeof3","_keys","_keys2","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_common","_Base2","_Base3","_getSpots_inline","_getSpots_inline2","getSpotsWorker","Worker","GetSpotsJS","postMessage","data","reveive","onmessage","e","defaultState","useImageData","size","exclude","include","imgs","Part","_Base","props","arguments","length","_this","__proto__","call","keys","v","bind","_partAddFuncs","_partGetSpots","init","_this2","resolve","ctx","_state$eles","eles","_state$cw","cw","_state$ch","ch","list","map","img","clearRect","width","height","Math","floor","x","y","drawImage","getImageData","spots","setState","imageData","opts","_this3","_partFuncs2","_partFuncs","Array","item","concat","_partRefresh","loads","func","all","then","_this4","_state2","_state2$imgs","loadAll","664","_Canvas","_Canvas2","_Part","_Part2","Canvas","665","_func","ImageData","prototype","getDataFrom","self","pixels","getPiexl","_pixels$v","index","putImageData","w","h","cva","ratio","window","devicePixelRatio","action","update","forEach","val","getEles","parent","parentNode","clientWidth","document","body","clientHeight","setAttribute","style","getContext","order","_state3","_state3$list","requestAnimationFrame","push","_state4","_state4$list","_partLoad","render","getAttr","setList","666","_ref","_ref$list","_ref$width","_item$color","color","start","a","667","p","716","717","_index","_index2","_index3","_index4","_react2","_react3","_index5","_index6","_durden","_close","_close2","_View","_View2","_components","displayName","_UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformHmrLibIndexJs2","filename","components","locals","imports","_UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformCatchErrorsLibIndexJs2","voice","song","src","audio","Audio","preload","autoplay","loop","crossOrigin","oncanplay","AudioCtx","AudioContext","webkitAudioContext","audioCtx","source","createMediaElementSource","gainNode","createGain","processor","createScriptProcessor","connect","destination","onaudioprocess","inData","inputBuffer","getChannelData","outData","outputBuffer","man","Close","_state$spots","createImageData","_state$spots2","res","distance","vCenter","_voice","centerX","_imageData$data","space","abs","ceil","times","movePx","target","isHover","id","Component","_Component","apply","setCva","fillStyle","createElement","className","onMouseEnter","onMouseLeave","718","719"],"mappings":"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","file":"js/4.e4d43edf.js","sourcesContent":["webpackJsonp([4],{\n\n/***/ 657:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__webpack_require__(716);\n\nvar _Music = __webpack_require__(717);\n\nvar _Music2 = _interopRequireDefault(_Music);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _Music2.default;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 661:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Base = function () {\n  function Base() {\n    (0, _classCallCheck3.default)(this, Base);\n  }\n\n  (0, _createClass3.default)(Base, [{\n    key: \"setState\",\n    value: function setState(obj, cb) {\n      var _state = this.state,\n          state = _state === undefined ? {} : _state;\n\n      this.state = (0, _assign2.default)({}, state, obj);\n\n      cb && cb();\n    }\n  }]);\n  return Base;\n}();\n\nexports.default = Base;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n\n/***/ 662:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(273);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _typeof2 = __webpack_require__(99);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = __webpack_require__(156);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = __webpack_require__(26);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(27);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(28);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _common = __webpack_require__(155);\n\nvar _Base2 = __webpack_require__(661);\n\nvar _Base3 = _interopRequireDefault(_Base2);\n\nvar _getSpots_inline = __webpack_require__(667);\n\nvar _getSpots_inline2 = _interopRequireDefault(_getSpots_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getSpotsWorker = new Worker(_getSpots_inline2.default);\n\nvar postMessage = function postMessage(data) {\n  getSpotsWorker.postMessage(data);\n};\n\nvar reveive = function reveive(cb) {\n  getSpotsWorker.onmessage = function (e) {\n    cb && cb(e.data);\n  };\n};\n\nvar defaultState = {\n  useImageData: false,\n  size: 1,\n  exclude: [[255, 255, 255], [0, 0, 0, 0]],\n  include: [],\n  imgs: []\n};\n\nvar Part = function (_Base) {\n  (0, _inherits3.default)(Part, _Base);\n\n  function Part() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck3.default)(this, Part);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Part.__proto__ || (0, _getPrototypeOf2.default)(Part)).call(this, props));\n\n    var keys = (0, _keys2.default)(props);\n    var length = keys.length;\n\n    var state = {};\n\n    for (var v = 0; v < length; v++) {\n      var key = keys[v];\n      var value = props[key];\n\n      switch (typeof value === 'undefined' ? 'undefined' : (0, _typeof3.default)(value)) {\n        case 'function':\n          {\n            _this[key] = value.bind(_this);\n            break;\n          }\n\n        default:\n          {\n            state[key] = value;\n            break;\n          }\n      }\n    }\n\n    _this.state = (0, _assign2.default)({}, defaultState, state);\n    _this._partAddFuncs(_this._partGetSpots);\n    _this.init && _this.init();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Part, [{\n    key: '_partGetSpots',\n    value: function _partGetSpots() {\n      var _this2 = this;\n\n      return new _promise2.default(function (resolve) {\n        if (!_this2.state.useImageData) {\n          return resolve();\n        }\n\n        var _state = _this2.state,\n            ctx = _state.ctx,\n            _state$eles = _state.eles,\n            eles = _state$eles === undefined ? [] : _state$eles,\n            _state$cw = _state.cw,\n            cw = _state$cw === undefined ? 0 : _state$cw,\n            _state$ch = _state.ch,\n            ch = _state$ch === undefined ? 0 : _state$ch,\n            exclude = _state.exclude,\n            include = _state.include,\n            size = _state.size;\n\n        var list = eles.map(function (img) {\n          ctx.clearRect(0, 0, cw, ch);\n          var width = img.width,\n              height = img.height;\n\n\n          if (width >= cw) {\n            height = Math.floor(height * cw / width);\n            width = cw;\n          }\n\n          var x = (cw - width) / 2;\n          var y = (ch - height) / 2;\n\n          ctx.drawImage(img, x, y, width, height);\n          return ctx.getImageData(x, y, width, height);\n        });\n        ctx.clearRect(0, 0, cw, ch);\n\n        reveive(function (spots) {\n          _this2.setState({\n            spots: spots\n          });\n\n          resolve();\n        });\n\n        postMessage({\n          imageData: list,\n          opts: {\n            cw: cw,\n            ch: ch,\n            exclude: exclude,\n            include: include,\n            size: size\n          }\n        });\n      });\n    }\n  }, {\n    key: '_partAddFuncs',\n    value: function _partAddFuncs(list, cb) {\n      var _this3 = this;\n\n      var _partFuncs2 = this._partFuncs,\n          _partFuncs = _partFuncs2 === undefined ? [] : _partFuncs2;\n\n      list = list instanceof Array ? list : [list];\n      list = list.map(function (item) {\n        return item.bind(_this3);\n      });\n\n      this._partFuncs = _partFuncs.concat(list);\n      cb && this._partRefresh(cb);\n    }\n  }, {\n    key: '_partRefresh',\n    value: function _partRefresh(cb) {\n      var loads = this._partFuncs.map(function (func) {\n        return func();\n      });\n      _promise2.default.all(loads).then(cb);\n    }\n  }, {\n    key: '_partLoad',\n    value: function _partLoad() {\n      var _this4 = this;\n\n      var _state2 = this.state,\n          _state2$imgs = _state2.imgs,\n          imgs = _state2$imgs === undefined ? [] : _state2$imgs,\n          useImageData = _state2.useImageData;\n\n\n      return new _promise2.default(function (resolve) {\n        (0, _common.loadAll)(imgs, function (eles) {\n          _this4.setState({ eles: eles });\n\n          if (!useImageData) {\n            return resolve();\n          }\n\n          _this4._partRefresh(resolve);\n        });\n      });\n    }\n  }]);\n  return Part;\n}(_Base3.default);\n\nexports.default = Part;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 664:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Part = undefined;\n\nvar _Canvas = __webpack_require__(665);\n\nvar _Canvas2 = _interopRequireDefault(_Canvas);\n\nvar _Part = __webpack_require__(662);\n\nvar _Part2 = _interopRequireDefault(_Part);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Part = _Part2.default;\nexports.default = _Canvas2.default;\n\n/***/ }),\n\n/***/ 665:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(273);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _typeof2 = __webpack_require__(99);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = __webpack_require__(156);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = __webpack_require__(26);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(27);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(28);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _common = __webpack_require__(155);\n\nvar _func = __webpack_require__(666);\n\nvar _Base2 = __webpack_require__(661);\n\nvar _Base3 = _interopRequireDefault(_Base2);\n\nvar _Part = __webpack_require__(662);\n\nvar _Part2 = _interopRequireDefault(_Part);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nImageData.prototype.getDataFrom = function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var ctx = arguments[1];\n\n  var self = this;\n  var width = self.width,\n      data = self.data;\n\n\n  var pixels = (0, _func.getPiexl)({ list: list, width: width });\n  var length = pixels.length;\n\n\n  for (var v = 0; v < length; v++) {\n    var _pixels$v = pixels[v],\n        index = _pixels$v.index,\n        value = _pixels$v.value;\n\n\n    data[index] = data[index] || value;\n  }\n\n  ctx.putImageData(self, 0, 0);\n};\n\nvar Canvas = function (_Base) {\n  (0, _inherits3.default)(Canvas, _Base);\n\n  function Canvas(props) {\n    (0, _classCallCheck3.default)(this, Canvas);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Canvas.__proto__ || (0, _getPrototypeOf2.default)(Canvas)).call(this, props));\n\n    _this.state = {\n      w: props.w,\n      h: props.h,\n      cva: props.cva,\n      ratio: window.devicePixelRatio,\n      list: props.list || []\n    };\n\n    _this.action = _this.action.bind(_this);\n    _this.update = _this.update.bind(_this);\n\n    _this.init();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Canvas, [{\n    key: 'setCva',\n    value: function setCva(obj) {\n      var ctx = this.state.ctx;\n\n\n      (0, _keys2.default)(obj).forEach(function (key) {\n        var val = obj[key];\n\n        switch (typeof val === 'undefined' ? 'undefined' : (0, _typeof3.default)(val)) {\n          case 'string':\n            ctx[key] = val;\n            break;\n          case 'function':\n            val(ctx);\n            break;\n        }\n      });\n\n      return ctx;\n    }\n  }, {\n    key: 'getAttr',\n    value: function getAttr() {\n      var _state = this.state,\n          cva = _state.cva,\n          w = _state.w,\n          h = _state.h;\n      var ratio = this.state.ratio;\n\n\n      cva = typeof cva === 'string' ? (0, _common.getEles)(cva)[0] : cva;\n\n      var parent = cva.parentNode;\n\n      w = w || parent.clientWidth || document.body.clientWidth;\n      h = h || parent.clientHeight || document.body.clientHeight;\n\n      var cw = w * ratio;\n      var ch = h * ratio;\n\n      cva.setAttribute('width', cw + 'px');\n      cva.setAttribute('height', ch + 'px');\n\n      cva.style.width = w + 'px';\n      cva.style.height = h + 'px';\n\n      var ctx = cva.getContext('2d');\n\n      this.setState({\n        cva: cva,\n        ctx: ctx,\n        w: w,\n        h: h,\n        cw: cw,\n        ch: ch\n      });\n    }\n  }, {\n    key: 'setList',\n    value: function setList() {\n      var _state2 = this.state,\n          ratio = _state2.ratio,\n          cw = _state2.cw,\n          ch = _state2.ch,\n          w = _state2.w,\n          h = _state2.h,\n          ctx = _state2.ctx;\n\n\n      var opts = {\n        ratio: ratio,\n        cw: cw,\n        ch: ch,\n        w: w,\n        h: h,\n        ctx: ctx\n      };\n\n      this.state.list = this.state.list.map(function (item, order) {\n        return new _Part2.default((0, _assign2.default)({ order: order }, opts, item));\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this2 = this;\n\n      var _state3 = this.state,\n          _state3$list = _state3.list,\n          list = _state3$list === undefined ? [] : _state3$list,\n          ctx = _state3.ctx,\n          cw = _state3.cw,\n          ch = _state3.ch,\n          ratio = _state3.ratio,\n          w = _state3.w,\n          h = _state3.h;\n\n\n      window.requestAnimationFrame(function () {\n        var loads = [];\n\n        for (var v = 0; v < list.length; v++) {\n          var item = list[v];\n\n          item.update && loads.push(item.update(ctx, cw, ch, ratio, w, h));\n        }\n\n        _promise2.default.all(loads).then(_this2.update);\n      });\n    }\n  }, {\n    key: 'action',\n    value: function action() {\n      var _this3 = this;\n\n      var _state4 = this.state,\n          _state4$list = _state4.list,\n          list = _state4$list === undefined ? [] : _state4$list,\n          ctx = _state4.ctx,\n          cw = _state4.cw,\n          ch = _state4.ch,\n          ratio = _state4.ratio,\n          w = _state4.w,\n          h = _state4.h;\n\n      var loads = [];\n\n      for (var v = 0; v < list.length; v++) {\n        var item = list[v];\n\n        item._partLoad && loads.push(item._partLoad());\n      }\n\n      _promise2.default.all(loads).then(function () {\n        list.forEach(function (item) {\n          item.render && item.render(ctx, cw, ch, ratio, w, h);\n        });\n\n        _this3.update();\n      });\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      this.getAttr();\n      this.setList();\n      this.action();\n    }\n  }]);\n  return Canvas;\n}(_Base3.default);\n\nexports.default = Canvas;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 666:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPiexl = getPiexl;\nfunction getPiexl() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$list = _ref.list,\n      list = _ref$list === undefined ? [] : _ref$list,\n      _ref$width = _ref.width,\n      width = _ref$width === undefined ? 0 : _ref$width;\n\n  var length = list.length;\n\n  var data = [];\n\n  for (var v = 0; v < length; v++) {\n    var item = list[v];\n    var x = item.x,\n        y = item.y,\n        _item$color = item.color,\n        color = _item$color === undefined ? [] : _item$color;\n\n\n    var start = (x + (y - 1) * width) * 4;\n\n    for (var a = 0; a < 4; a++) {\n      data.push({\n        index: start + a,\n        value: color[a]\n      });\n    }\n  }\n\n  return data;\n}\n\n/***/ }),\n\n/***/ 667:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"js/d3d3e3d5bdf94ded22305ef17322581e.js\";\n\n/***/ }),\n\n/***/ 716:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 717:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _getPrototypeOf = __webpack_require__(26);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(27);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(28);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _promise = __webpack_require__(273);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _index = __webpack_require__(29);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(30);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = __webpack_require__(3);\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = __webpack_require__(31);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _durden = __webpack_require__(718);\n\nvar _durden2 = _interopRequireDefault(_durden);\n\nvar _close = __webpack_require__(719);\n\nvar _close2 = _interopRequireDefault(_close);\n\nvar _View = __webpack_require__(664);\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n  Music: {\n    displayName: 'Music'\n  }\n};\n\nvar _UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n  filename: '/Users/xiaoshuang/xiaoshuang/save/web-something-awesome/something-awesome/frontend/js/container/canvas/pages/Music/Music.jsx',\n  components: _components,\n  locals: [module],\n  imports: [_react3.default]\n});\n\nvar _UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n  filename: '/Users/xiaoshuang/xiaoshuang/save/web-something-awesome/something-awesome/frontend/js/container/canvas/pages/Music/Music.jsx',\n  components: _components,\n  locals: [],\n  imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n  return function (Component) {\n    return _UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformHmrLibIndexJs2(_UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n  };\n}\n\nvar voice = [];\nvar src = 'http://oi9dcgq2m.bkt.clouddn.com/Hozier%20-%20Take%20Me%20To%20Church.mp3';\nvar song = {\n  src: src,\n  _partLoad: function _partLoad() {\n    var _this = this;\n\n    return new _promise2.default(function (resolve) {\n      var audio = new Audio();\n      audio.preload = 'true';\n      audio.autoplay = 'true';\n      audio.loop = 'true';\n      audio.crossOrigin = 'anonymous';\n      audio.src = _this.state.src;\n\n      audio.oncanplay = function () {\n        // audio.play();\n        _this.setState({\n          eles: [audio]\n        }, resolve);\n      };\n\n      var AudioCtx = window.AudioContext || window.webkitAudioContext;\n      var audioCtx = new AudioCtx();\n      var source = audioCtx.createMediaElementSource(audio);\n      var gainNode = audioCtx.createGain();\n      var processor = audioCtx.createScriptProcessor(4096, 1, 1);\n\n      source.connect(gainNode);\n      gainNode.connect(processor);\n      processor.connect(audioCtx.destination);\n\n      processor.onaudioprocess = function (e) {\n        var inData = e.inputBuffer.getChannelData(0);\n        var outData = e.outputBuffer.getChannelData(0);\n\n        for (var v = 0; v < inData.length; v += 1) {\n          outData[v] = inData[v];\n        }\n\n        voice = inData;\n      };\n    });\n  }\n};\nvar man = {\n  imgs: [_close2.default],\n  useImageData: true,\n  size: 3,\n  render: function render(ctx, cw, ch) {\n    var _state$spots = this.state.spots,\n        spots = _state$spots === undefined ? [] : _state$spots;\n\n    var imageData = ctx.createImageData(cw, ch);\n\n    imageData.getDataFrom(spots[0], ctx);\n  },\n  update: function update(ctx, cw, ch) {\n    var _state = this.state,\n        _state$spots2 = _state.spots,\n        spots = _state$spots2 === undefined ? [] : _state$spots2,\n        _state$eles = _state.eles,\n        eles = _state$eles === undefined ? [] : _state$eles;\n\n    var res = spots[0];\n    var img = eles[0];\n\n    var height = img.height;\n\n    var distance = height / 2;\n    var vCenter = ch / 2;\n    var _voice = voice,\n        length = _voice.length;\n\n\n    var imageData = ctx.createImageData(cw, ch);\n    var centerX = cw / 2;\n\n    var _imageData$data = imageData.data,\n        data = _imageData$data === undefined ? [] : _imageData$data;\n\n\n    for (var v = 3; v < data.length; v += 4) {\n      data[v] = 255;\n    }\n\n    for (var _v = 0; _v < res.length; _v++) {\n      var item = res[_v];\n\n      var space = Math.abs(item.y - vCenter);\n      space = space > distance ? distance : space;\n      var index = Math.ceil(space / distance * (length - 1));\n      var times = voice[index] + 1;\n      var movePx = Math.ceil(times * 3);\n\n      // const item = Object.assign({}, res[v]);\n      // item.color[3] = (voice[(item.y * 128) % length] + 0.5) * 255;\n\n      item.start = item.start || item.x;\n      item.target = isHover ? item.start : Math.ceil((item.start - centerX) * times + centerX);\n      item.x = item.target > item.x ? item.x + movePx : item.x - movePx;\n      item.color = [255, 255, 255, 255];\n      res[_v] = item;\n    }\n\n    imageData.getDataFrom(res, ctx);\n  }\n};\n\nvar isHover = false;\n\nvar Music = _wrapComponent('Music')(function (_Component) {\n  (0, _inherits3.default)(Music, _Component);\n\n  function Music() {\n    (0, _classCallCheck3.default)(this, Music);\n    return (0, _possibleConstructorReturn3.default)(this, (Music.__proto__ || (0, _getPrototypeOf2.default)(Music)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(Music, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.init();\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      var res = new _View2.default({\n        cva: '#canvas',\n        list: [man, song]\n      });\n\n      res.setCva({\n        fillStyle: 'black'\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react3.default.createElement(\n        'div',\n        { className: 'page-canvas-music-render' },\n        _react3.default.createElement('canvas', { id: 'canvas', onMouseEnter: function onMouseEnter() {\n            isHover = true;\n          }, onMouseLeave: function onMouseLeave() {\n            isHover = false;\n          } })\n      );\n    }\n  }]);\n  return Music;\n}(_react2.Component));\n\nexports.default = Music;\nmodule.exports = exports['default'];\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(15)(module)))\n\n/***/ }),\n\n/***/ 718:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/b30d7d6b39820f10f86705a39ce81609.jpg\";\n\n/***/ }),\n\n/***/ 719:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/798c11c6a22e5cb4f85ada6dfbbd0237.svg\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/4.e4d43edf.js","import './Music.scss';\nimport Music from './Music';\nexport default Music;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/pages/Music/index.js","class Base {\n  setState(obj, cb) {\n    const { state = {} } = this;\n    this.state = Object.assign({}, state, obj);\n\n    cb && cb();\n  }\n}\n\nexport default Base;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/Base.js","import { loadAll } from 'js/common';\n\nimport Base from './Base';\nimport GetSpotsJS from './getSpots_inline';\n\nconst getSpotsWorker = new Worker(GetSpotsJS);\n\nconst postMessage = (data) => {\n  getSpotsWorker.postMessage(data);\n};\n\nconst reveive = (cb) => {\n  getSpotsWorker.onmessage = (e) => {\n    cb && cb(e.data);\n  };\n};\n\nconst defaultState = {\n  useImageData: false,\n  size: 1,\n  exclude: [[255, 255, 255], [0, 0, 0, 0]],\n  include: [],\n  imgs: [],\n};\n\nclass Part extends Base {\n  constructor(props = {}) {\n    super(props);\n\n    const keys = Object.keys(props);\n    const { length } = keys;\n    const state = {};\n\n    for (let v = 0; v < length; v++) {\n      const key = keys[v];\n      const value = props[key];\n\n      switch (typeof value) {\n        case 'function': {\n          this[key] = value.bind(this);\n          break;\n        }\n\n        default: {\n          state[key] = value;\n          break;\n        }\n      }\n    }\n\n    this.state = Object.assign({}, defaultState, state);\n    this._partAddFuncs(this._partGetSpots);\n    this.init && this.init();\n  }\n\n  _partGetSpots() {\n    return new Promise((resolve) => {\n      if (!this.state.useImageData) {\n        return resolve();\n      }\n\n      const { ctx, eles = [], cw = 0, ch = 0, exclude, include, size } = this.state;\n      const list = eles.map((img) => {\n        ctx.clearRect(0, 0, cw, ch);\n        let { width, height } = img;\n\n        if (width >= cw) {\n          height = Math.floor(height * cw / width);\n          width = cw;\n        }\n\n        const x = (cw - width) / 2;\n        const y = (ch - height) / 2;\n\n        ctx.drawImage(img, x, y, width, height);\n        return ctx.getImageData(x, y, width, height);\n      });\n      ctx.clearRect(0, 0, cw, ch);\n\n      reveive((spots) => {\n        this.setState({\n          spots,\n        });\n\n        resolve();\n      });\n\n      postMessage({\n        imageData: list,\n        opts: {\n          cw,\n          ch,\n          exclude,\n          include,\n          size,\n        },\n      });\n    });\n  }\n\n  _partAddFuncs(list, cb) {\n    const { _partFuncs = [] } = this;\n\n    list = (list instanceof Array) ? list : [list];\n    list = list.map(item => item.bind(this));\n\n    this._partFuncs = _partFuncs.concat(list);\n    cb && this._partRefresh(cb);\n  }\n\n  _partRefresh(cb) {\n    const loads = this._partFuncs.map(func => func());\n    Promise.all(loads).then(cb);\n  }\n\n  _partLoad() {\n    const { imgs = [], useImageData } = this.state;\n\n    return new Promise((resolve) => {\n      loadAll(imgs, (eles) => {\n        this.setState({ eles });\n\n        if (!useImageData) {\n          return resolve();\n        }\n\n        this._partRefresh(resolve);\n      });\n    });\n  }\n}\n\nexport default Part;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/Part.js","import Canvas from './Canvas';\nimport Part from './Part';\n\nexport {\n  Part,\n};\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/index.js","import { getEles } from 'js/common';\n\nimport { getPiexl } from './func';\nimport Base from './Base';\nimport Part from './Part';\n\nImageData.prototype.getDataFrom = function (list = [], ctx) {\n  const self = this;\n  const { width, data } = self;\n\n  const pixels = getPiexl({ list, width });\n  const { length } = pixels;\n\n  for (let v = 0; v < length; v++) {\n    const { index, value } = pixels[v];\n\n    data[index] = data[index] || value;\n  }\n\n  ctx.putImageData(self, 0, 0);\n};\n\nclass Canvas extends Base {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      w: props.w,\n      h: props.h,\n      cva: props.cva,\n      ratio: window.devicePixelRatio,\n      list: props.list || [],\n    };\n\n    this.action = this.action.bind(this);\n    this.update = this.update.bind(this);\n\n    this.init();\n  }\n\n  setCva(obj) {\n    const { ctx } = this.state;\n\n    Object.keys(obj).forEach((key) => {\n      const val = obj[key];\n\n      switch (typeof val) {\n        case 'string':\n          ctx[key] = val;\n          break;\n        case 'function':\n          val(ctx);\n          break;\n      }\n    });\n\n    return ctx;\n  }\n\n  getAttr() {\n    let { cva, w, h } = this.state;\n    const { ratio } = this.state;\n\n    cva = typeof cva === 'string' ? getEles(cva)[0] : cva;\n\n    const parent = cva.parentNode;\n\n    w = w || parent.clientWidth || document.body.clientWidth;\n    h = h || parent.clientHeight || document.body.clientHeight;\n\n    const cw = w * ratio;\n    const ch = h * ratio;\n\n    cva.setAttribute('width', `${cw}px`);\n    cva.setAttribute('height', `${ch}px`);\n\n    cva.style.width = `${w}px`;\n    cva.style.height = `${h}px`;\n\n    const ctx = cva.getContext('2d');\n\n    this.setState({\n      cva,\n      ctx,\n      w,\n      h,\n      cw,\n      ch,\n    });\n  }\n\n  setList() {\n    const { ratio, cw, ch, w, h, ctx } = this.state;\n\n    const opts = {\n      ratio,\n      cw,\n      ch,\n      w,\n      h,\n      ctx,\n    };\n\n    this.state.list = this.state.list.map((item, order) => {\n      return new Part(Object.assign({ order }, opts, item));\n    });\n  }\n\n  update() {\n    const { list = [], ctx, cw, ch, ratio, w, h } = this.state;\n\n    window.requestAnimationFrame(() => {\n      const loads = [];\n\n      for (let v = 0; v < list.length; v++) {\n        const item = list[v];\n\n        item.update && loads.push(item.update(ctx, cw, ch, ratio, w, h));\n      }\n\n      Promise.all(loads).then(this.update);\n    });\n  }\n\n  action() {\n    const { list = [], ctx, cw, ch, ratio, w, h } = this.state;\n    const loads = [];\n\n    for (let v = 0; v < list.length; v++) {\n      const item = list[v];\n\n      item._partLoad && loads.push(item._partLoad());\n    }\n\n    Promise.all(loads).then(() => {\n      list.forEach((item) => {\n        item.render && item.render(ctx, cw, ch, ratio, w, h);\n      });\n\n      this.update();\n    });\n  }\n\n  init() {\n    this.getAttr();\n    this.setList();\n    this.action();\n  }\n}\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/Canvas.js","export function getPiexl({ list = [], width = 0 } = {}) {\n  const { length } = list;\n  const data = [];\n\n  for (let v = 0; v < length; v++) {\n    const item = list[v];\n    const { x, y, color = [] } = item;\n\n    const start = (x + (y - 1) * width) * 4;\n\n    for (let a = 0; a < 4; a++) {\n      data.push({\n        index: start + a,\n        value: color[a],\n      });\n    }\n  }\n\n  return data;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/func.js","module.exports = __webpack_public_path__ + \"js/d3d3e3d5bdf94ded22305ef17322581e.js\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/js/container/canvas/components/View/getSpots_inline.js\n// module id = 667\n// module chunks = 0 3 4","import React, { Component } from 'react';\n\nimport Durden from './durden.jpg';\nimport Close from './close.svg';\nimport Canvas from '../../components/View';\n\nlet voice = [];\nconst src = 'http://oi9dcgq2m.bkt.clouddn.com/Hozier%20-%20Take%20Me%20To%20Church.mp3';\nconst song = {\n  src,\n  _partLoad() {\n    return new Promise((resolve) => {\n      const audio = new Audio();\n      audio.preload = 'true';\n      audio.autoplay = 'true';\n      audio.loop = 'true';\n      audio.crossOrigin = 'anonymous';\n      audio.src = this.state.src;\n\n      audio.oncanplay = () => {\n        // audio.play();\n        this.setState({\n          eles: [audio],\n        }, resolve);\n      };\n\n      const AudioCtx = window.AudioContext || window.webkitAudioContext;\n      const audioCtx = new AudioCtx;\n      const source = audioCtx.createMediaElementSource(audio);\n      const gainNode = audioCtx.createGain();\n      const processor = audioCtx.createScriptProcessor(4096, 1, 1);\n\n      source.connect(gainNode);\n      gainNode.connect(processor);\n      processor.connect(audioCtx.destination);\n\n      processor.onaudioprocess = (e) => {\n        const inData = e.inputBuffer.getChannelData(0);\n        const outData = e.outputBuffer.getChannelData(0);\n\n        for (let v = 0; v < inData.length; v += 1) {\n          outData[v] = inData[v];\n        }\n\n        voice = inData;\n      };\n    });\n  },\n};\nconst man = {\n  imgs: [Close],\n  useImageData: true,\n  size: 3,\n  render(ctx, cw, ch) {\n    const { spots = [] } = this.state;\n    const imageData = ctx.createImageData(cw, ch);\n\n    imageData.getDataFrom(spots[0], ctx);\n  },\n\n  update(ctx, cw, ch) {\n    const { spots = [], eles = [] } = this.state;\n    const res = spots[0];\n    const img = eles[0];\n\n    const { height } = img;\n    const distance = height / 2;\n    const vCenter = ch / 2;\n    const { length } = voice;\n\n    const imageData = ctx.createImageData(cw, ch);\n    const centerX = cw / 2;\n\n    const { data = [] } = imageData;\n\n    for (let v = 3; v < data.length; v += 4) {\n      data[v] = 255;\n    }\n\n    for (let v = 0; v < res.length; v ++) {\n      const item = res[v];\n\n      let space = Math.abs(item.y - vCenter);\n      space = space > distance ? distance : space;\n      const index = Math.ceil((space / distance) * (length - 1));\n      const times = voice[index] + 1;\n      const movePx = Math.ceil(times * 3);\n\n      // const item = Object.assign({}, res[v]);\n      // item.color[3] = (voice[(item.y * 128) % length] + 0.5) * 255;\n\n      item.start = item.start || item.x;\n      item.target = isHover ? item.start : Math.ceil((item.start - centerX) * times + centerX);\n      item.x = item.target > item.x ? (item.x + movePx) : (item.x - movePx);\n      item.color = [255, 255, 255, 255];\n      res[v] = item;\n    }\n\n    imageData.getDataFrom(res, ctx);\n  },\n};\n\nlet isHover = false;\n\nclass Music extends Component {\n  componentDidMount() {\n    this.init();\n  }\n  init() {\n    const res = new Canvas({\n      cva: '#canvas',\n      list: [man, song],\n    });\n\n    res.setCva({\n      fillStyle: 'black',\n    });\n  }\n  render() {\n    return (\n      <div className=\"page-canvas-music-render\">\n        <canvas id=\"canvas\" onMouseEnter={() => { isHover = true; }} onMouseLeave={() => { isHover = false; }} />\n      </div>\n    );\n  }\n}\n\nexport default Music;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/pages/Music/Music.jsx","module.exports = __webpack_public_path__ + \"img/b30d7d6b39820f10f86705a39ce81609.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/js/container/canvas/pages/Music/durden.jpg\n// module id = 718\n// module chunks = 4","module.exports = __webpack_public_path__ + \"img/798c11c6a22e5cb4f85ada6dfbbd0237.svg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/js/container/canvas/pages/Music/close.svg\n// module id = 719\n// module chunks = 4"],"sourceRoot":""}