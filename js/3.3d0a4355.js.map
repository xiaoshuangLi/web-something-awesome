{"version":3,"sources":["webpack:///js/3.3d0a4355.js","webpack:///./frontend/js/container/canvas/pages/View/index.js","webpack:///./frontend/js/container/canvas/components/View/Base.js","webpack:///./frontend/js/container/canvas/components/View/Part.js","webpack:///./frontend/js/container/canvas/components/View/index.js","webpack:///./frontend/js/container/canvas/components/View/Canvas.js","webpack:///./frontend/js/container/canvas/components/View/func.js","webpack:///./frontend/js/container/canvas/components/View/getSpots_inline.js","webpack:///./frontend/js/container/canvas/pages/View/View.jsx","webpack:///./frontend/js/container/canvas/pages/View/me.jpg","webpack:///./frontend/js/container/canvas/pages/View/durden.jpg"],"names":["webpackJsonp","656","module","exports","__webpack_require__","Object","defineProperty","value","_View","_View2","obj","__esModule","default","View","661","_interopRequireDefault","_assign","_assign2","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","Base","this","key","cb","_state","state","undefined","662","_promise","_promise2","_typeof2","_typeof3","_keys","_keys2","_getPrototypeOf","_getPrototypeOf2","_possibleConstructorReturn2","_possibleConstructorReturn3","_inherits2","_inherits3","_common","_Base2","_Base3","_getSpots_inline","_getSpots_inline2","getSpotsWorker","Worker","GetSpotsJS","postMessage","data","reveive","onmessage","e","defaultState","useImageData","size","exclude","include","imgs","Part","_Base","props","arguments","length","_this","__proto__","call","keys","v","bind","_partAddFuncs","_partGetSpots","init","_this2","resolve","ctx","_state$eles","eles","_state$cw","cw","_state$ch","ch","list","map","img","clearRect","width","height","Math","floor","x","y","drawImage","getImageData","spots","setState","imageData","opts","_this3","_partFuncs2","_partFuncs","Array","item","concat","_partRefresh","loads","func","all","then","_this4","_state2","_state2$imgs","loadAll","664","_Canvas","_Canvas2","_Part","_Part2","Canvas","665","_func","ImageData","prototype","getDataFrom","self","pixels","getPiexl","_pixels$v","index","putImageData","w","h","cva","ratio","window","devicePixelRatio","action","update","forEach","val","getEles","parent","parentNode","clientWidth","document","body","clientHeight","setAttribute","style","getContext","order","_state3","_state3$list","requestAnimationFrame","push","_state4","_state4$list","_partLoad","render","getAttr","setList","666","_ref","_ref$list","_ref$width","_item$color","color","start","a","667","p","712","713","createSpots","_data$from","from","_data$to","to","curr","res","fromItem","toItem","fromColor","toColor","_calc","_index","_index2","_index3","_index4","_react2","_react3","_index5","_index6","_me","_me2","_durden","_durden2","_components","displayName","_UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformHmrLibIndexJs2","filename","components","locals","imports","_UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformCatchErrorsLibIndexJs2","b","step","ceil","Me","Durden","id","Component","_Component","apply","_state$spots","createImageData","_state$curr","_state$index","_state$spots2","next","setCva","strokeStyle","createElement","className","714","715"],"mappings":"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","file":"js/3.3d0a4355.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 656:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n__webpack_require__(712);\n\nvar _View = __webpack_require__(713);\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _View2.default;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 661:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Base = function () {\n  function Base() {\n    (0, _classCallCheck3.default)(this, Base);\n  }\n\n  (0, _createClass3.default)(Base, [{\n    key: \"setState\",\n    value: function setState(obj, cb) {\n      var _state = this.state,\n          state = _state === undefined ? {} : _state;\n\n      this.state = (0, _assign2.default)({}, state, obj);\n\n      cb && cb();\n    }\n  }]);\n  return Base;\n}();\n\nexports.default = Base;\nmodule.exports = exports[\"default\"];\n\n/***/ }),\n\n/***/ 662:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(273);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _typeof2 = __webpack_require__(99);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = __webpack_require__(156);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = __webpack_require__(26);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(27);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(28);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _common = __webpack_require__(155);\n\nvar _Base2 = __webpack_require__(661);\n\nvar _Base3 = _interopRequireDefault(_Base2);\n\nvar _getSpots_inline = __webpack_require__(667);\n\nvar _getSpots_inline2 = _interopRequireDefault(_getSpots_inline);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar getSpotsWorker = new Worker(_getSpots_inline2.default);\n\nvar postMessage = function postMessage(data) {\n  getSpotsWorker.postMessage(data);\n};\n\nvar reveive = function reveive(cb) {\n  getSpotsWorker.onmessage = function (e) {\n    cb && cb(e.data);\n  };\n};\n\nvar defaultState = {\n  useImageData: false,\n  size: 1,\n  exclude: [[255, 255, 255], [0, 0, 0, 0]],\n  include: [],\n  imgs: []\n};\n\nvar Part = function (_Base) {\n  (0, _inherits3.default)(Part, _Base);\n\n  function Part() {\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    (0, _classCallCheck3.default)(this, Part);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Part.__proto__ || (0, _getPrototypeOf2.default)(Part)).call(this, props));\n\n    var keys = (0, _keys2.default)(props);\n    var length = keys.length;\n\n    var state = {};\n\n    for (var v = 0; v < length; v++) {\n      var key = keys[v];\n      var value = props[key];\n\n      switch (typeof value === 'undefined' ? 'undefined' : (0, _typeof3.default)(value)) {\n        case 'function':\n          {\n            _this[key] = value.bind(_this);\n            break;\n          }\n\n        default:\n          {\n            state[key] = value;\n            break;\n          }\n      }\n    }\n\n    _this.state = (0, _assign2.default)({}, defaultState, state);\n    _this._partAddFuncs(_this._partGetSpots);\n    _this.init && _this.init();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Part, [{\n    key: '_partGetSpots',\n    value: function _partGetSpots() {\n      var _this2 = this;\n\n      return new _promise2.default(function (resolve) {\n        if (!_this2.state.useImageData) {\n          return resolve();\n        }\n\n        var _state = _this2.state,\n            ctx = _state.ctx,\n            _state$eles = _state.eles,\n            eles = _state$eles === undefined ? [] : _state$eles,\n            _state$cw = _state.cw,\n            cw = _state$cw === undefined ? 0 : _state$cw,\n            _state$ch = _state.ch,\n            ch = _state$ch === undefined ? 0 : _state$ch,\n            exclude = _state.exclude,\n            include = _state.include,\n            size = _state.size;\n\n        var list = eles.map(function (img) {\n          ctx.clearRect(0, 0, cw, ch);\n          var width = img.width,\n              height = img.height;\n\n\n          if (width >= cw) {\n            height = Math.floor(height * cw / width);\n            width = cw;\n          }\n\n          var x = (cw - width) / 2;\n          var y = (ch - height) / 2;\n\n          ctx.drawImage(img, x, y, width, height);\n          return ctx.getImageData(x, y, width, height);\n        });\n        ctx.clearRect(0, 0, cw, ch);\n\n        reveive(function (spots) {\n          _this2.setState({\n            spots: spots\n          });\n\n          resolve();\n        });\n\n        postMessage({\n          imageData: list,\n          opts: {\n            cw: cw,\n            ch: ch,\n            exclude: exclude,\n            include: include,\n            size: size\n          }\n        });\n      });\n    }\n  }, {\n    key: '_partAddFuncs',\n    value: function _partAddFuncs(list, cb) {\n      var _this3 = this;\n\n      var _partFuncs2 = this._partFuncs,\n          _partFuncs = _partFuncs2 === undefined ? [] : _partFuncs2;\n\n      list = list instanceof Array ? list : [list];\n      list = list.map(function (item) {\n        return item.bind(_this3);\n      });\n\n      this._partFuncs = _partFuncs.concat(list);\n      cb && this._partRefresh(cb);\n    }\n  }, {\n    key: '_partRefresh',\n    value: function _partRefresh(cb) {\n      var loads = this._partFuncs.map(function (func) {\n        return func();\n      });\n      _promise2.default.all(loads).then(cb);\n    }\n  }, {\n    key: '_partLoad',\n    value: function _partLoad() {\n      var _this4 = this;\n\n      var _state2 = this.state,\n          _state2$imgs = _state2.imgs,\n          imgs = _state2$imgs === undefined ? [] : _state2$imgs,\n          useImageData = _state2.useImageData;\n\n\n      return new _promise2.default(function (resolve) {\n        (0, _common.loadAll)(imgs, function (eles) {\n          _this4.setState({ eles: eles });\n\n          if (!useImageData) {\n            return resolve();\n          }\n\n          _this4._partRefresh(resolve);\n        });\n      });\n    }\n  }]);\n  return Part;\n}(_Base3.default);\n\nexports.default = Part;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 664:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Part = undefined;\n\nvar _Canvas = __webpack_require__(665);\n\nvar _Canvas2 = _interopRequireDefault(_Canvas);\n\nvar _Part = __webpack_require__(662);\n\nvar _Part2 = _interopRequireDefault(_Part);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.Part = _Part2.default;\nexports.default = _Canvas2.default;\n\n/***/ }),\n\n/***/ 665:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(273);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _assign = __webpack_require__(71);\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nvar _typeof2 = __webpack_require__(99);\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nvar _keys = __webpack_require__(156);\n\nvar _keys2 = _interopRequireDefault(_keys);\n\nvar _getPrototypeOf = __webpack_require__(26);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(27);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(28);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _common = __webpack_require__(155);\n\nvar _func = __webpack_require__(666);\n\nvar _Base2 = __webpack_require__(661);\n\nvar _Base3 = _interopRequireDefault(_Base2);\n\nvar _Part = __webpack_require__(662);\n\nvar _Part2 = _interopRequireDefault(_Part);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nImageData.prototype.getDataFrom = function () {\n  var list = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var ctx = arguments[1];\n\n  var self = this;\n  var width = self.width,\n      data = self.data;\n\n\n  var pixels = (0, _func.getPiexl)({ list: list, width: width });\n  var length = pixels.length;\n\n\n  for (var v = 0; v < length; v++) {\n    var _pixels$v = pixels[v],\n        index = _pixels$v.index,\n        value = _pixels$v.value;\n\n\n    data[index] = data[index] || value;\n  }\n\n  ctx.putImageData(self, 0, 0);\n};\n\nvar Canvas = function (_Base) {\n  (0, _inherits3.default)(Canvas, _Base);\n\n  function Canvas(props) {\n    (0, _classCallCheck3.default)(this, Canvas);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, (Canvas.__proto__ || (0, _getPrototypeOf2.default)(Canvas)).call(this, props));\n\n    _this.state = {\n      w: props.w,\n      h: props.h,\n      cva: props.cva,\n      ratio: window.devicePixelRatio,\n      list: props.list || []\n    };\n\n    _this.action = _this.action.bind(_this);\n    _this.update = _this.update.bind(_this);\n\n    _this.init();\n    return _this;\n  }\n\n  (0, _createClass3.default)(Canvas, [{\n    key: 'setCva',\n    value: function setCva(obj) {\n      var ctx = this.state.ctx;\n\n\n      (0, _keys2.default)(obj).forEach(function (key) {\n        var val = obj[key];\n\n        switch (typeof val === 'undefined' ? 'undefined' : (0, _typeof3.default)(val)) {\n          case 'string':\n            ctx[key] = val;\n            break;\n          case 'function':\n            val(ctx);\n            break;\n        }\n      });\n\n      return ctx;\n    }\n  }, {\n    key: 'getAttr',\n    value: function getAttr() {\n      var _state = this.state,\n          cva = _state.cva,\n          w = _state.w,\n          h = _state.h;\n      var ratio = this.state.ratio;\n\n\n      cva = typeof cva === 'string' ? (0, _common.getEles)(cva)[0] : cva;\n\n      var parent = cva.parentNode;\n\n      w = w || parent.clientWidth || document.body.clientWidth;\n      h = h || parent.clientHeight || document.body.clientHeight;\n\n      var cw = w * ratio;\n      var ch = h * ratio;\n\n      cva.setAttribute('width', cw + 'px');\n      cva.setAttribute('height', ch + 'px');\n\n      cva.style.width = w + 'px';\n      cva.style.height = h + 'px';\n\n      var ctx = cva.getContext('2d');\n\n      this.setState({\n        cva: cva,\n        ctx: ctx,\n        w: w,\n        h: h,\n        cw: cw,\n        ch: ch\n      });\n    }\n  }, {\n    key: 'setList',\n    value: function setList() {\n      var _state2 = this.state,\n          ratio = _state2.ratio,\n          cw = _state2.cw,\n          ch = _state2.ch,\n          w = _state2.w,\n          h = _state2.h,\n          ctx = _state2.ctx;\n\n\n      var opts = {\n        ratio: ratio,\n        cw: cw,\n        ch: ch,\n        w: w,\n        h: h,\n        ctx: ctx\n      };\n\n      this.state.list = this.state.list.map(function (item, order) {\n        return new _Part2.default((0, _assign2.default)({ order: order }, opts, item));\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this2 = this;\n\n      var _state3 = this.state,\n          _state3$list = _state3.list,\n          list = _state3$list === undefined ? [] : _state3$list,\n          ctx = _state3.ctx,\n          cw = _state3.cw,\n          ch = _state3.ch,\n          ratio = _state3.ratio,\n          w = _state3.w,\n          h = _state3.h;\n\n\n      window.requestAnimationFrame(function () {\n        var loads = [];\n\n        for (var v = 0; v < list.length; v++) {\n          var item = list[v];\n\n          item.update && loads.push(item.update(ctx, cw, ch, ratio, w, h));\n        }\n\n        _promise2.default.all(loads).then(_this2.update);\n      });\n    }\n  }, {\n    key: 'action',\n    value: function action() {\n      var _this3 = this;\n\n      var _state4 = this.state,\n          _state4$list = _state4.list,\n          list = _state4$list === undefined ? [] : _state4$list,\n          ctx = _state4.ctx,\n          cw = _state4.cw,\n          ch = _state4.ch,\n          ratio = _state4.ratio,\n          w = _state4.w,\n          h = _state4.h;\n\n      var loads = [];\n\n      for (var v = 0; v < list.length; v++) {\n        var item = list[v];\n\n        item._partLoad && loads.push(item._partLoad());\n      }\n\n      _promise2.default.all(loads).then(function () {\n        list.forEach(function (item) {\n          item.render && item.render(ctx, cw, ch, ratio, w, h);\n        });\n\n        _this3.update();\n      });\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      this.getAttr();\n      this.setList();\n      this.action();\n    }\n  }]);\n  return Canvas;\n}(_Base3.default);\n\nexports.default = Canvas;\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ 666:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getPiexl = getPiexl;\nfunction getPiexl() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      _ref$list = _ref.list,\n      list = _ref$list === undefined ? [] : _ref$list,\n      _ref$width = _ref.width,\n      width = _ref$width === undefined ? 0 : _ref$width;\n\n  var length = list.length;\n\n  var data = [];\n\n  for (var v = 0; v < length; v++) {\n    var item = list[v];\n    var x = item.x,\n        y = item.y,\n        _item$color = item.color,\n        color = _item$color === undefined ? [] : _item$color;\n\n\n    var start = (x + (y - 1) * width) * 4;\n\n    for (var a = 0; a < 4; a++) {\n      data.push({\n        index: start + a,\n        value: color[a]\n      });\n    }\n  }\n\n  return data;\n}\n\n/***/ }),\n\n/***/ 667:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"js/d3d3e3d5bdf94ded22305ef17322581e.js\";\n\n/***/ }),\n\n/***/ 712:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 713:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(module) {\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _promise = __webpack_require__(273);\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _getPrototypeOf = __webpack_require__(26);\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _classCallCheck2 = __webpack_require__(12);\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = __webpack_require__(13);\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _possibleConstructorReturn2 = __webpack_require__(27);\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = __webpack_require__(28);\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _index = __webpack_require__(29);\n\nvar _index2 = _interopRequireDefault(_index);\n\nvar _index3 = __webpack_require__(30);\n\nvar _index4 = _interopRequireDefault(_index3);\n\nvar _react2 = __webpack_require__(3);\n\nvar _react3 = _interopRequireDefault(_react2);\n\nvar _index5 = __webpack_require__(31);\n\nvar _index6 = _interopRequireDefault(_index5);\n\nvar _me = __webpack_require__(714);\n\nvar _me2 = _interopRequireDefault(_me);\n\nvar _durden = __webpack_require__(715);\n\nvar _durden2 = _interopRequireDefault(_durden);\n\nvar _View = __webpack_require__(664);\n\nvar _View2 = _interopRequireDefault(_View);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar _components = {\n  View: {\n    displayName: 'View'\n  }\n};\n\nvar _UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformHmrLibIndexJs2 = (0, _index6.default)({\n  filename: '/Users/xiaoshuang/xiaoshuang/save/web-something-awesome/something-awesome/frontend/js/container/canvas/pages/View/View.jsx',\n  components: _components,\n  locals: [module],\n  imports: [_react3.default]\n});\n\nvar _UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformCatchErrorsLibIndexJs2 = (0, _index4.default)({\n  filename: '/Users/xiaoshuang/xiaoshuang/save/web-something-awesome/something-awesome/frontend/js/container/canvas/pages/View/View.jsx',\n  components: _components,\n  locals: [],\n  imports: [_react3.default, _index2.default]\n});\n\nfunction _wrapComponent(id) {\n  return function (Component) {\n    return _UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformHmrLibIndexJs2(_UsersXiaoshuangXiaoshuangSaveWebSomethingAwesomeSomethingAwesomeNode_modulesReactTransformCatchErrorsLibIndexJs2(Component, id), id);\n  };\n}\n\nvar _calc = function _calc(a, b, step) {\n  return Math.ceil(a + (b - a) * step);\n};\n\nfunction createSpots(data) {\n  var _data$from = data.from,\n      from = _data$from === undefined ? [] : _data$from,\n      _data$to = data.to,\n      to = _data$to === undefined ? [] : _data$to,\n      curr = data.curr;\n  var length = from.length;\n\n  var res = [];\n\n  for (var v = 0; v < length; v++) {\n    var fromItem = from[v];\n    var toItem = to[v];\n\n    var fromColor = fromItem.color || [];\n    var toColor = toItem.color || [];\n\n    res[v] = {\n      x: _calc(fromItem.x, toItem.x, curr),\n      y: _calc(fromItem.y, toItem.y, curr),\n      color: [_calc(fromColor[0], toColor[0], curr), _calc(fromColor[1], toColor[1], curr), _calc(fromColor[2], toColor[2], curr), _calc(fromColor[3], toColor[3], curr)]\n    };\n  }\n\n  return res;\n}\n\nvar imgs = [_me2.default, _durden2.default];\n\nvar speed = 1;\nvar per = 1 / (60 * speed);\n\nvar View = _wrapComponent('View')(function (_Component) {\n  (0, _inherits3.default)(View, _Component);\n\n  function View() {\n    (0, _classCallCheck3.default)(this, View);\n    return (0, _possibleConstructorReturn3.default)(this, (View.__proto__ || (0, _getPrototypeOf2.default)(View)).apply(this, arguments));\n  }\n\n  (0, _createClass3.default)(View, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.init();\n    }\n  }, {\n    key: 'init',\n    value: function init() {\n      var ele = new _View2.default({\n        cva: '#canvas',\n        list: [{\n          imgs: imgs,\n          useImageData: true,\n          size: 1,\n          render: function render(ctx, cw, ch) {\n            var _state$spots = this.state.spots,\n                spots = _state$spots === undefined ? [] : _state$spots;\n\n            var imageData = ctx.createImageData(cw, ch);\n\n            imageData.getDataFrom(spots[0], ctx);\n          },\n          update: function update(ctx, cw, ch) {\n            var _this2 = this;\n\n            return new _promise2.default(function (resolve) {\n              var _state$curr = _this2.state.curr,\n                  curr = _state$curr === undefined ? 0 : _state$curr;\n              var _state = _this2.state,\n                  _state$index = _state.index,\n                  index = _state$index === undefined ? 0 : _state$index,\n                  _state$spots2 = _state.spots,\n                  spots = _state$spots2 === undefined ? [] : _state$spots2;\n\n              var next = (index + 1) % spots.length;\n\n              curr += per;\n\n              if (curr >= 1) {\n                _this2.state.index = next;\n                _this2.state.curr = 0;\n              } else {\n                _this2.state.curr = curr;\n              }\n\n              var data = createSpots({\n                from: spots[index],\n                to: spots[next],\n                curr: curr\n              });\n\n              var imageData = ctx.createImageData(cw, ch);\n              imageData.getDataFrom(data, ctx);\n              resolve();\n            });\n          }\n        }]\n      });\n\n      ele.setCva({\n        strokeStyle: 'rgba(0,0,0,0)'\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return _react3.default.createElement(\n        'div',\n        { className: 'page-canvas-view-render' },\n        _react3.default.createElement('canvas', { id: 'canvas' })\n      );\n    }\n  }]);\n  return View;\n}(_react2.Component));\n\nexports.default = View;\nmodule.exports = exports['default'];\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(15)(module)))\n\n/***/ }),\n\n/***/ 714:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/800a76ff0824f5d1cf6033df5affe869.jpg\";\n\n/***/ }),\n\n/***/ 715:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"img/b30d7d6b39820f10f86705a39ce81609.jpg\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// js/3.3d0a4355.js","import './View.scss';\nimport View from './View';\nexport default View;\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/pages/View/index.js","class Base {\n  setState(obj, cb) {\n    const { state = {} } = this;\n    this.state = Object.assign({}, state, obj);\n\n    cb && cb();\n  }\n}\n\nexport default Base;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/Base.js","import { loadAll } from 'js/common';\n\nimport Base from './Base';\nimport GetSpotsJS from './getSpots_inline';\n\nconst getSpotsWorker = new Worker(GetSpotsJS);\n\nconst postMessage = (data) => {\n  getSpotsWorker.postMessage(data);\n};\n\nconst reveive = (cb) => {\n  getSpotsWorker.onmessage = (e) => {\n    cb && cb(e.data);\n  };\n};\n\nconst defaultState = {\n  useImageData: false,\n  size: 1,\n  exclude: [[255, 255, 255], [0, 0, 0, 0]],\n  include: [],\n  imgs: [],\n};\n\nclass Part extends Base {\n  constructor(props = {}) {\n    super(props);\n\n    const keys = Object.keys(props);\n    const { length } = keys;\n    const state = {};\n\n    for (let v = 0; v < length; v++) {\n      const key = keys[v];\n      const value = props[key];\n\n      switch (typeof value) {\n        case 'function': {\n          this[key] = value.bind(this);\n          break;\n        }\n\n        default: {\n          state[key] = value;\n          break;\n        }\n      }\n    }\n\n    this.state = Object.assign({}, defaultState, state);\n    this._partAddFuncs(this._partGetSpots);\n    this.init && this.init();\n  }\n\n  _partGetSpots() {\n    return new Promise((resolve) => {\n      if (!this.state.useImageData) {\n        return resolve();\n      }\n\n      const { ctx, eles = [], cw = 0, ch = 0, exclude, include, size } = this.state;\n      const list = eles.map((img) => {\n        ctx.clearRect(0, 0, cw, ch);\n        let { width, height } = img;\n\n        if (width >= cw) {\n          height = Math.floor(height * cw / width);\n          width = cw;\n        }\n\n        const x = (cw - width) / 2;\n        const y = (ch - height) / 2;\n\n        ctx.drawImage(img, x, y, width, height);\n        return ctx.getImageData(x, y, width, height);\n      });\n      ctx.clearRect(0, 0, cw, ch);\n\n      reveive((spots) => {\n        this.setState({\n          spots,\n        });\n\n        resolve();\n      });\n\n      postMessage({\n        imageData: list,\n        opts: {\n          cw,\n          ch,\n          exclude,\n          include,\n          size,\n        },\n      });\n    });\n  }\n\n  _partAddFuncs(list, cb) {\n    const { _partFuncs = [] } = this;\n\n    list = (list instanceof Array) ? list : [list];\n    list = list.map(item => item.bind(this));\n\n    this._partFuncs = _partFuncs.concat(list);\n    cb && this._partRefresh(cb);\n  }\n\n  _partRefresh(cb) {\n    const loads = this._partFuncs.map(func => func());\n    Promise.all(loads).then(cb);\n  }\n\n  _partLoad() {\n    const { imgs = [], useImageData } = this.state;\n\n    return new Promise((resolve) => {\n      loadAll(imgs, (eles) => {\n        this.setState({ eles });\n\n        if (!useImageData) {\n          return resolve();\n        }\n\n        this._partRefresh(resolve);\n      });\n    });\n  }\n}\n\nexport default Part;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/Part.js","import Canvas from './Canvas';\nimport Part from './Part';\n\nexport {\n  Part,\n};\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/index.js","import { getEles } from 'js/common';\n\nimport { getPiexl } from './func';\nimport Base from './Base';\nimport Part from './Part';\n\nImageData.prototype.getDataFrom = function (list = [], ctx) {\n  const self = this;\n  const { width, data } = self;\n\n  const pixels = getPiexl({ list, width });\n  const { length } = pixels;\n\n  for (let v = 0; v < length; v++) {\n    const { index, value } = pixels[v];\n\n    data[index] = data[index] || value;\n  }\n\n  ctx.putImageData(self, 0, 0);\n};\n\nclass Canvas extends Base {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      w: props.w,\n      h: props.h,\n      cva: props.cva,\n      ratio: window.devicePixelRatio,\n      list: props.list || [],\n    };\n\n    this.action = this.action.bind(this);\n    this.update = this.update.bind(this);\n\n    this.init();\n  }\n\n  setCva(obj) {\n    const { ctx } = this.state;\n\n    Object.keys(obj).forEach((key) => {\n      const val = obj[key];\n\n      switch (typeof val) {\n        case 'string':\n          ctx[key] = val;\n          break;\n        case 'function':\n          val(ctx);\n          break;\n      }\n    });\n\n    return ctx;\n  }\n\n  getAttr() {\n    let { cva, w, h } = this.state;\n    const { ratio } = this.state;\n\n    cva = typeof cva === 'string' ? getEles(cva)[0] : cva;\n\n    const parent = cva.parentNode;\n\n    w = w || parent.clientWidth || document.body.clientWidth;\n    h = h || parent.clientHeight || document.body.clientHeight;\n\n    const cw = w * ratio;\n    const ch = h * ratio;\n\n    cva.setAttribute('width', `${cw}px`);\n    cva.setAttribute('height', `${ch}px`);\n\n    cva.style.width = `${w}px`;\n    cva.style.height = `${h}px`;\n\n    const ctx = cva.getContext('2d');\n\n    this.setState({\n      cva,\n      ctx,\n      w,\n      h,\n      cw,\n      ch,\n    });\n  }\n\n  setList() {\n    const { ratio, cw, ch, w, h, ctx } = this.state;\n\n    const opts = {\n      ratio,\n      cw,\n      ch,\n      w,\n      h,\n      ctx,\n    };\n\n    this.state.list = this.state.list.map((item, order) => {\n      return new Part(Object.assign({ order }, opts, item));\n    });\n  }\n\n  update() {\n    const { list = [], ctx, cw, ch, ratio, w, h } = this.state;\n\n    window.requestAnimationFrame(() => {\n      const loads = [];\n\n      for (let v = 0; v < list.length; v++) {\n        const item = list[v];\n\n        item.update && loads.push(item.update(ctx, cw, ch, ratio, w, h));\n      }\n\n      Promise.all(loads).then(this.update);\n    });\n  }\n\n  action() {\n    const { list = [], ctx, cw, ch, ratio, w, h } = this.state;\n    const loads = [];\n\n    for (let v = 0; v < list.length; v++) {\n      const item = list[v];\n\n      item._partLoad && loads.push(item._partLoad());\n    }\n\n    Promise.all(loads).then(() => {\n      list.forEach((item) => {\n        item.render && item.render(ctx, cw, ch, ratio, w, h);\n      });\n\n      this.update();\n    });\n  }\n\n  init() {\n    this.getAttr();\n    this.setList();\n    this.action();\n  }\n}\n\nexport default Canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/Canvas.js","export function getPiexl({ list = [], width = 0 } = {}) {\n  const { length } = list;\n  const data = [];\n\n  for (let v = 0; v < length; v++) {\n    const item = list[v];\n    const { x, y, color = [] } = item;\n\n    const start = (x + (y - 1) * width) * 4;\n\n    for (let a = 0; a < 4; a++) {\n      data.push({\n        index: start + a,\n        value: color[a],\n      });\n    }\n  }\n\n  return data;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/components/View/func.js","module.exports = __webpack_public_path__ + \"js/d3d3e3d5bdf94ded22305ef17322581e.js\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/js/container/canvas/components/View/getSpots_inline.js\n// module id = 667\n// module chunks = 0 3 4","import React, { Component } from 'react';\n\nimport Me from './me.jpg';\nimport Durden from './durden.jpg';\n\nimport Canvas from '../../components/View';\n\nconst _calc = (a, b, step) => {\n  return Math.ceil(a + (b - a) * step);\n};\n\nfunction createSpots(data) {\n  const { from = [], to = [], curr } = data;\n\n  const { length } = from;\n  const res = [];\n\n  for (let v = 0; v < length; v++) {\n    const fromItem = from[v];\n    const toItem = to[v];\n\n    const fromColor = fromItem.color || [];\n    const toColor = toItem.color || [];\n\n    res[v] = {\n      x: _calc(fromItem.x, toItem.x, curr),\n      y: _calc(fromItem.y, toItem.y, curr),\n      color: [_calc(fromColor[0], toColor[0], curr), _calc(fromColor[1], toColor[1], curr), _calc(fromColor[2], toColor[2], curr), _calc(fromColor[3], toColor[3], curr)],\n    };\n  }\n\n  return res;\n}\n\nconst imgs = [Me, Durden];\n\nconst speed = 1;\nconst per = 1 / (60 * speed);\n\nclass View extends Component {\n\n  componentDidMount() {\n    this.init();\n  }\n\n  init() {\n    const ele = new Canvas({\n      cva: '#canvas',\n      list: [{\n        imgs,\n        useImageData: true,\n        size: 1,\n        render: function (ctx, cw, ch) {\n          const { spots = [] } = this.state;\n          const imageData = ctx.createImageData(cw, ch);\n\n          imageData.getDataFrom(spots[0], ctx);\n        },\n        update: function (ctx, cw, ch) {\n          return new Promise((resolve) => {\n            let { curr = 0 } = this.state;\n            const { index = 0, spots = [] } = this.state;\n            const next = (index + 1) % spots.length;\n\n            curr += per;\n\n            if (curr >= 1) {\n              this.state.index = next;\n              this.state.curr = 0;\n            } else {\n              this.state.curr = curr;\n            }\n\n            const data = createSpots({\n              from: spots[index],\n              to: spots[next],\n              curr,\n            });\n\n            const imageData = ctx.createImageData(cw, ch);\n            imageData.getDataFrom(data, ctx);\n            resolve();\n          });\n        },\n      }],\n    });\n\n    ele.setCva({\n      strokeStyle: 'rgba(0,0,0,0)',\n    });\n  }\n\n  render() {\n    return (\n      <div className=\"page-canvas-view-render\">\n        <canvas id=\"canvas\" />\n      </div>\n    );\n  }\n}\n\nexport default View;\n\n\n\n\n// WEBPACK FOOTER //\n// ./frontend/js/container/canvas/pages/View/View.jsx","module.exports = __webpack_public_path__ + \"img/800a76ff0824f5d1cf6033df5affe869.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/js/container/canvas/pages/View/me.jpg\n// module id = 714\n// module chunks = 3","module.exports = __webpack_public_path__ + \"img/b30d7d6b39820f10f86705a39ce81609.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./frontend/js/container/canvas/pages/View/durden.jpg\n// module id = 715\n// module chunks = 3"],"sourceRoot":""}